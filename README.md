
# 方案1

## 实现消息提醒任务即将到期

NestJS提供了一个轻量级的定时任务模块，可以使用它来创建定时任务。

基于这一点，我们可以创建一个定时任务，每天检查即将到期的任务并发送消息提醒。 

如果需求是提醒三天之内到期的任务，我们可以设置定时任务每隔一分钟执行一次。

定时任务会读取所有TodoStatus为Todo的任务，检查endDate和今天相差的天数。


如果在三天以内的话，则发送消息提醒给用户。可以新建一张消息表用于存储用户消息。

消息标题为：任务即将到期，请尽快处理。

然后再设计一个API用于返回用户的最新消息。

在React中，可以使用WebSocket或者轮询后端接口来获取即将到期的任务，然后在前端进行消息提醒的展示。


## 定时重复任务

如果任务没有完成，我们需要重复提醒，这时因为TodoStatus仍然为Todo，所以依然会被定时任务扫描到。

不过我们需要修改一下判断逻辑，如果endDate和今天的日期相比较，已经过期的话，我们也存储一条用户消息到消息表中。

消息标题为：任务已经过期，请尽快处理。

如果用户一直没有完成这项任务的话，则会一直收到消息提醒，直到用户完成为止。



# 方案2





